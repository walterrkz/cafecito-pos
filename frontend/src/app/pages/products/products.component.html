<section class="products-page">
  <h1>Products</h1>

  <div class="controls">
    <input
      type="text"
      placeholder="Search product..."
      #searchInput
      (input)="loadProducts(searchInput.value, +pageInput.value, +limitInput.value)"
    />

    <input
      type="number"
      min="1"
      placeholder="Page"
      value="1"
      #pageInput
      (change)="loadProducts(searchInput.value, +pageInput.value, +limitInput.value)"
    />

    <input
      type="number"
      min="1"
      max="100"
      placeholder="Limit"
      value="20"
      #limitInput
      (change)="loadProducts(searchInput.value, +pageInput.value, +limitInput.value)"
    />
  </div>

  @if (products$ | async; as response) {

    <p>
      Showing {{ response.data.length }} of {{ response.total }} products
    </p>

    @for (product of response.data; track product.id) {
      <article class="product-card">
        <h3>{{ product.name }}</h3>
        <p>Price: ${{ product.price }}</p>
        <p>Stock: {{ product.stock }}</p>
      </article>
    }

    @if (response.data.length === 0) {
      <p>No products found</p>
    }

  } @else {
    <p>Loading products...</p>
  }
</section>
